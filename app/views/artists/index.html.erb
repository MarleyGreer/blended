<%= form_tag artists_path, method: :get do %>
<%= collection_select(:artist, :category, @artists, :category, :category, @categoryselect, html_options = { class: "custom-select", id: "category-selector", onchange: "this.form.submit()" }) %>
<% end %>

<% @artists.each do |artist| %>
  <%= link_to artist_path(artist) do %>
    <div class="card p-3", style="margin-left:auto; margin-right: auto; width: 95%; height: 400px">
      <%= cl_image_tag artist.photos[0].key, height: 280, width: 400, gravity: :face, crop: :fill, class: "card-img"%>
      <div class="d-flex justify-content-between">
        <div class="mt-3">
         <h6><%= artist.user.first_name %> <%= artist.user.last_name %></h6>
         <p><i class="fas fa-map-marker-alt fa-lg"></i> <%= artist.user.address %></p>
        </div>
        <div class="card-rating">
          <h6>
            <i class="fas fa-star rating"></i>
            <i class="fas fa-star rating"></i>
            <i class="fas fa-star rating"></i>
            <i class="fas fa-star rating"></i>
            <i class="fas fa-star rating"></i>
          </h6>
        </div>
      </div>
    </div>
  <% end %>
  <br>
<% end %>

<div id="map"
     style="width: 100%; height: 600px;"
     data-markers="<%= @markers.to_json %>"
     data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
</div>
